/**
 * Created by saman on 5/31/17.
 * translate.js
 homeController.js
 headerDirective.js
 headerController.js
 signupController.js
 signinController.js
 aboutController.js
 */
angular.module("myApp").config(["$translateProvider",function(e){e.translations("en",{TITLE:"عنوان"}),e.translations("fa",{general:{input:{required:"وارد کردن این فیلد الزامی است.",validEmail:"لطفا یک آدرس ایمیل معتبر وارد کنید.",minlength:{6:"لطفا حداقل ۶ کاراکتر وارد کنید."}},error:{500:"خطا! لطفا دوباره امتحان کنید."}},signin:{200:"ورود با موفقیت انجام شد.",204:"نام کاربری یا رمز عبور نادرست است.",401:"نام کاربری یا رمز عبور نادرست است.",400:"اطلاعات وارد شده نادرست است."},signup:{200:"ثبت نام با موفقیت انجام شد.",204:"اطلاعات ضروری به درستی وارد نشده است.",226:"ایمیل وارد شده تکراری است. لطفا آدرس ایمیل دیگری وارد کنید.",400:"اطلاعات وارد شده نادرست است.",412:"رمزهای وارد شده یکسان نیست."},profile:{200:"ویرایش اطلاعات پروفایل با موفقیت انجام شد.",204:"اطلاعات هویتی شما معتبر نیست.",400:"اطلاعات وارد شده نادرست است.",403:"رمز عبور فعلی نادرست است.",500:"ویرایش اطلاعات پروفایل با خطا مواجه شد."},transaction:{create:{500:"بارگذاری فایل یا ثبت تراکنش با خطا مواجه شد. لطفا مجددا امتحان کنید.",400:"اطلاعات وارد شده نادرست است.",208:"این فایل قبلا ثبت شده است. امکان ثبت مجدد آن وجود ندارد.",507:"اعتبار حساب شما کافی نیست.",509:"در حال حاضر ظرفیت سرور پر شده است. لطفا بعدا امتحان کنید."},validate:{404:"این سند قبلا ثبت نشده است."},detail:{204:"تراکنش با این شناسه یافت نشد."},list:{400:"بازه‌ی زمانی انتخاب شده نادرست است."}},payment:{400:"مبلغ یوبیت درخواستی از حداقل مجاز کمتر است."},auth:{google:{permissionDenied:'"ثبت شد" به سرویس گوگل دسترسی ندارد.',inviteError:"در ارسال دعوت نامه با مشکل روبرو شده ایم."}},recover:{expired:"درخواست شما منقضی شده است.",invalidData:"اطلاعات درخواست بازگردانی رمز عبور نامعتبر است.",changeException:"قادر به بازگردانی کلمه عبور نمی باشیم."}}),e.preferredLanguage("fa")}]),angular.module("myApp.home",[]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/resources/app/home/home.html",controller:"HomeController"})}]).controller("HomeController",["$scope","$window","$rootScope","StorageFactory","$translate","$sce","UtilsFactory","$location","$mdDialog","EmailContactFactory","UserFactory",function(e,t,o,n,r,s,a,i,l,c,u){if("true"==_paymentMode){var p="error";100!=_status&&101!=_status||(p="ok");var g={type:p,text:_statusString,refId:_refId};l.show({locals:{data:g},controller:"PaymentResultController",templateUrl:"/resources/app/payment/paymentResult.html",parent:angular.element(document.body),clickOutsideToClose:!0}),"ok"===p&&u.getUserCredit().then(function(e){return n.set("credit",e)})}if(!0===_recoverMode)if(!0===_recoverExpired)a.Toast({text:r.instant("recover.expired"),type:"error"});else{var m=_recoverMail,d=_recoverHash;m&&d?(_recoverMail=null,_recoverHash=null,_recoverExpired=!1,_recoverMode=!1,i.path("/recover").search({email:m,hash:d})):a.Toast({text:r.instant("recover.invalidData"),type:"error"})}if(!0===_socialAuthMode)if(!1===_socialAuthSuccess)a.Toast({text:r.instant("auth.google.permissionDenied"),type:"error"});else{var h=_emails,f=_photos;c.saveContacts(h,f),_photos=null,_emails=null,_socialAuthSuccess=!1,_socialAuthMode=!1,i.path("/invite")}this.config={sources:[],tracks:[{src:"http://www.videogular.com/assets/subs/pale-blue-dot.vtt",kind:"subtitles",srclang:"en",label:"English",default:""}],theme:"/resources/bower_components/videogular-themes-default/videogular.css",plugins:{poster:"http://www.videogular.com/assets/images/videogular.png"}},e.isLogin=n.get("isLogin"),o.$on("LocalStorageModule.notification.setitem",function(t,o){"isLogin"===o.key&&(e.isLogin=n.get("isLogin"))}),this.isCollapsed1=!0,this.isCollapsed2=!0,this.isCollapsed3=!0,this.isCollapsed4=!0}]),angular.module("myApp").directive("header",function(){return{restrict:"A",replace:!0,templateUrl:"/resources/app/header/header.html",controller:"HeaderController",controllerAs:"ctrl"}}),angular.module("myApp").controller("HeaderController",["$scope","$rootScope","$mdSidenav","$mdDialog","StorageFactory","UtilsFactory","$location","EmailContactFactory",function(e,t,o,n,r,s,a,i){function l(){return s.HttpGet("/downloadProfile/"+e.token,{}).then(function(e){var t;return e.data&&(t=c(e.data)),t}).catch(function(e){console.error(e)})}function c(e){for(var t="",o=new Uint8Array(e),n=o.byteLength,r=0;r<n;r++)t+=String.fromCharCode(o[r]);return window.btoa(t)}e.currentNavItem="home",function(){e.isLogin=r.get("isLogin"),e.token=r.get("token"),e.pic=r.get("pic"),e.fname=r.get("fname"),e.lname=r.get("lname"),e.email=r.get("email"),e.credit=r.get("credit"),e.isLogin&&(e.userIdHash=s.SHA256(r.get("userId")),l().then(function(t){r.set("pic",t),e.pic=t}).catch(function(e){console.error(e)}))}(),t.$on("LocalStorageModule.notification.setitem",function(t,o){"isLogin"===o.key?(e.isLogin=r.get("isLogin"),e.isLogin?e.currentNavItem="home":(e.fname=r.get("fname"),e.lname=r.get("lname"),e.email=r.get("email"),e.pic=void 0)):"token"===o.key?(e.token=r.get("token"),e.token?l().then(function(t){r.set("pic",t),e.pic=t}):(e.userIdHash=void 0,e.pic=void 0)):"userId"===o.key?e.userIdHash=s.SHA256(r.get("userId")):"fname"===o.key?e.fname=r.get("fname"):"lname"===o.key?e.lname=r.get("lname"):"email"===o.key?e.email=r.get("email"):"credit"===o.key&&(e.credit=r.get("credit"))}),e.$on("profileUpdated",function(t,o){l().then(function(t){r.set("pic",t),e.pic=t}).catch(function(e){console.error(e)})}),e.$on("$routeChangeSuccess",function(t,o){e.closeSideNav()}),this.signup=function(e){n.show({controller:"SignupController",templateUrl:"/resources/app/signup/signup.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},this.signin=function(e){n.show({controller:"SigninController",templateUrl:"/resources/app/signin/signin.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},this.signout=function(){r.clear(),r.set("isLogin",!1),a.path("/")},this.profile=function(t){n.show({controller:"ProfileController",templateUrl:"/resources/app/profile/profile.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}),setTimeout(function(){e.closeSideNav()},100)},this.payment=function(t){n.show({controller:"PaymentController",templateUrl:"/resources/app/payment/payment.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}),setTimeout(function(){e.closeSideNav()},100)},this.transactionList=function(){a.path("/transaction/list")},e.isOpenRight=function(){return o("right").isOpen()},e.toggleSideNav=function(){o("right").toggle().then(function(){})},e.isSideNavOpen=function(){return o("right").isOpen()},e.closeSideNav=function(){o("right").close()};var u;this.openMenu=function(e,t){u=t,e.open(t)},this.closeMenu=function(e,t){u=t,e.close(t)},this.invite=function(){i.fetchContacts()}}]),myApp.directive("jdenticonHash",function(){return{restrict:"A",link:function(e,t,o){jdenticon.update(t[0],o.jdenticonHash)}}}),angular.module("myApp").controller("SignupController",["$scope","$mdDialog","UtilsFactory","UserFactory","$translate",function(e,t,o,n,r){e.msg={},e.loading=!1,e.userData={email:"",password:"",confirmPassword:""},e.submit=function(){if(e.loading=!0,e.msg={},e.userData.password!==e.userData.confirmPassword)return e.msg.status=412,e.msg.type="error",void o.Toast({text:r.instant("signup."+e.msg.status),type:"error"});var n=o.SHA256(e.userData.password),s=o.SHA256(e.userData.confirmPassword);o.HttpPost("/signup",{email:e.userData.email,passwordHash:n,confirmPasswordHash:s,platform:"WEB"}).then(function(n){e.loading=!1,e.msg.status=n.status,200===n.status?(e.msg.type="ok",t.hide("cancel"),e.success()):(e.msg.status=n.status,e.msg.type="error",o.Toast({text:r.instant("signup."+n.status),type:"error"}))}).catch(function(t){e.loading=!1,e.msg.status=t.status,e.msg.type="error",o.Toast({text:r.instant("signup."+t.status),type:"error"})})},e.cancel=function(){t.hide("cancel")},e.success=function(){var t=o.SHA256(e.userData.password);n.signIn({email:e.userData.email,passwordHash:t,platform:"web"}).then(function(t){e.loading=!1,200===t.status?(e.userData={},e.msg.type="ok"):(e.msg.status=t.status,e.msg.type="error"),o.Toast({text:r.instant("signup."+t.status),type:e.msg.type})}).catch(function(t){e.loading=!1,e.msg.status=t.status,e.msg.type="error",o.Toast({text:r.instant("signup."+t.status),type:e.msg.type})})},e.signin=function(){t.show({controller:"SigninController",templateUrl:"/resources/app/signin/signin.html",parent:angular.element(document.body),clickOutsideToClose:!0})}}]),angular.module("myApp").controller("SigninController",["$scope","$mdDialog","$mdToast","UtilsFactory","StorageFactory","UserFactory","$translate",function(e,t,o,n,r,s,a){e.msg={},e.loading=!1,e.userData={email:"",password:""},e.submit=function(){e.msg={},e.loading=!0;var o=n.SHA256(e.userData.password);s.signIn({email:e.userData.email,passwordHash:o,platform:"web"}).then(function(o){e.loading=!1,200===o.status?(e.userData={},e.msg.type="ok",t.hide("cancel")):(e.msg.status=o.status,e.msg.type="error"),n.Toast({text:a.instant("signin."+o.status),type:e.msg.type})}).catch(function(t){e.loading=!1,e.msg.status=t.status,e.msg.type="error",n.Toast({text:a.instant("signin."+t.status),type:"error"})})},e.cancel=function(){t.hide("cancel")},e.signup=function(){t.show({controller:"SignupController",templateUrl:"/resources/app/signup/signup.html",parent:angular.element(document.body),clickOutsideToClose:!0})},e.forgetPassword=function(){t.show({controller:"ForgetPasswordController",templateUrl:"/resources/app/forgetPassword/forgetPassword.html",parent:angular.element(document.body),clickOutsideToClose:!0})}}]),angular.module("myApp").controller("AboutController",["$scope",function(e){e.title="درباره‌ی ما",e.text="لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است. چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است و برای شرایط فعلی تکنولوژی مورد نیاز و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد. کتابهای زیادی در شصت و سه درصد گذشته، حال و آینده شناخت فراوان جامعه و متخصصان را می طلبد تا با نرم افزارها شناخت بیشتری را برای طراحان رایانه ای علی الخصوص طراحان خلاقی و فرهنگ پیشرو در زبان فارسی ایجاد کرد. در این صورت می توان امید داشت که تمام و دشواری موجود در ارائه راهکارها و شرایط سخت تایپ به پایان رسد وزمان مورد نیاز شامل حروفچینی دستاوردهای اصلی و جوابگوی سوالات پیوسته اهل دنیای موجود طراحی اساسا مورد استفاده قرار گیرد."}]);